---
title: Deactivate
description: Begin the deactivation cooldown process for delegated stake.
---

## Overview

| Property | Value |
|----------|-------|
| Instruction Index | 5 |
| Estimated CU | ~10,600 |

The `Deactivate` instruction initiates the cooldown process for stake. Once deactivation completes (after one or more epochs), the stake can be withdrawn.

## Accounts

| Index | Name | Writable | Signer | Description |
|-------|------|----------|--------|-------------|
| 0 | Stake Account | ✅ | ❌ | The stake account to deactivate |
| 1 | Clock Sysvar | ❌ | ❌ | `SysvarC1ock11111111111111111111111111111111` |
| 2 | Stake Authority | ❌ | ✅ | Stake authority must sign |

## Arguments

None.

## Behavior

1. Validates stake account is currently delegated (activating or active)
2. Sets `deactivation_epoch` to current epoch
3. Stake begins cooling down at the next epoch boundary
4. During cooldown, stake continues earning rewards proportional to effective stake

## Cooldown Duration

The cooldown period depends on network conditions:
- **Typical**: 1-4 epochs (2-12 days on mainnet)
- **High deactivation volume**: May extend longer

## Examples

### TypeScript (web3.js v1)

```typescript
import {
  Connection,
  PublicKey,
  Transaction,
  StakeProgram,
  sendAndConfirmTransaction,
} from '@solana/web3.js';

const connection = new Connection('https://api.mainnet-beta.solana.com', 'confirmed');

const stakeAccountPubkey = new PublicKey('...');
const stakeAuthority = /* Keypair */;

const deactivateIx = StakeProgram.deactivate({
  stakePubkey: stakeAccountPubkey,
  authorizedPubkey: stakeAuthority.publicKey,
});

const tx = new Transaction().add(deactivateIx);

const signature = await sendAndConfirmTransaction(connection, tx, [
  payer,
  stakeAuthority,
]);

console.log('Deactivation initiated:', signature);
```

### TypeScript (@solana-program/stake)

```typescript
import { getDeactivateInstruction } from '@solana-program/stake';
import { CLOCK_SYSVAR_ADDRESS } from '@solana/kit';

const deactivateIx = getDeactivateInstruction({
  stakeAccount: stakeAccountAddress,
  stakeAuthority: stakeAuthoritySigner,
  clock: CLOCK_SYSVAR_ADDRESS,
});
```

### Rust

```rust
use solana_sdk::{
    pubkey::Pubkey,
    signature::{Keypair, Signer},
    stake::instruction as stake_instruction,
    transaction::Transaction,
};

fn deactivate_stake(
    client: &RpcClient,
    payer: &Keypair,
    stake_account: &Pubkey,
    stake_authority: &Keypair,
) -> Result<(), Box<dyn std::error::Error>> {
    let deactivate_ix = stake_instruction::deactivate_stake(
        stake_account,
        &stake_authority.pubkey(),
    );

    let recent_blockhash = client.get_latest_blockhash()?;
    let tx = Transaction::new_signed_with_payer(
        &[deactivate_ix],
        Some(&payer.pubkey()),
        &[payer, stake_authority],
        recent_blockhash,
    );

    client.send_and_confirm_transaction(&tx)?;
    Ok(())
}
```

### CLI

```bash
# Deactivate stake
solana deactivate-stake <STAKE_ACCOUNT_ADDRESS>

# With explicit stake authority
solana deactivate-stake <STAKE_ACCOUNT_ADDRESS> \
  --stake-authority <STAKE_AUTHORITY_KEYPAIR>
```

## Monitoring Deactivation

```typescript
async function monitorDeactivation(
  connection: Connection,
  stakeAccount: PublicKey
) {
  const activation = await connection.getStakeActivation(stakeAccount);
  
  if (activation.state === 'deactivating') {
    const totalStake = activation.active + activation.inactive;
    const progress = (activation.inactive / totalStake) * 100;
    console.log(`Deactivation progress: ${progress.toFixed(1)}%`);
    console.log(`Active: ${activation.active}, Inactive: ${activation.inactive}`);
  } else if (activation.state === 'inactive') {
    console.log('Deactivation complete! Ready for withdrawal.');
  }
}
```

## Errors

| Error | Cause |
|-------|-------|
| `InvalidAccountData` | Stake account not delegated |
| `AlreadyDeactivated` | Stake already deactivating or deactivated |

---
