---
title: SetLockup
description: Modify the lockup parameters of a stake account..
---

## Overview

| Property | Value |
|----------|-------|
| Instruction Index | 6 |
| Estimated CU | ~9,300 |

The `SetLockup` instruction modifies the lockup configuration of a stake account. Lockups restrict when SOL can be withdrawn.

## Accounts

| Index | Name | Writable | Signer | Description |
|-------|------|----------|--------|-------------|
| 0 | Stake Account | ✅ | ❌ | The stake account to modify |
| 1 | Authority | ❌ | ✅ | Withdraw authority or lockup custodian |

## Arguments

```rust
pub struct LockupArgs {
    pub unix_timestamp: Option<i64>,
    pub epoch: Option<Epoch>,
    pub custodian: Option<Pubkey>,
}
```

| Field | Type | Description |
|-------|------|-------------|
| `unix_timestamp` | `Option<i64>` | New timestamp restriction (None = don't change) |
| `epoch` | `Option<u64>` | New epoch restriction (None = don't change) |
| `custodian` | `Option<Pubkey>` | New custodian (None = don't change) |

## Authorization Rules

| Lockup State | Who Can Modify |
|--------------|----------------|
| No lockup active | Withdraw authority |
| Lockup active | Lockup custodian only |
| Lockup expired | Withdraw authority |

## Lockup Mechanics

A lockup prevents withdrawal until **both** conditions are met:
- Current unix timestamp ≥ `lockup.unix_timestamp`
- Current epoch ≥ `lockup.epoch`

Setting either to 0 effectively disables that check.

## Examples

### Rust

```rust
use solana_sdk::{
    pubkey::Pubkey,
    signature::{Keypair, Signer},
    stake::{
        instruction as stake_instruction,
        state::LockupArgs,
    },
    transaction::Transaction,
};

fn set_lockup(
    client: &RpcClient,
    payer: &Keypair,
    stake_account: &Pubkey,
    authority: &Keypair,
    unix_timestamp: Option<i64>,
    epoch: Option<u64>,
    custodian: Option<Pubkey>,
) -> Result<(), Box<dyn std::error::Error>> {
    let set_lockup_ix = stake_instruction::set_lockup(
        stake_account,
        &LockupArgs {
            unix_timestamp,
            epoch,
            custodian,
        },
        &authority.pubkey(),
    );

    let recent_blockhash = client.get_latest_blockhash()?;
    let tx = Transaction::new_signed_with_payer(
        &[set_lockup_ix],
        Some(&payer.pubkey()),
        &[payer, authority],
        recent_blockhash,
    );

    client.send_and_confirm_transaction(&tx)?;
    Ok(())
}
```

### CLI

```bash
# Set lockup with timestamp
solana stake-set-lockup <STAKE_ACCOUNT_ADDRESS> \
  --lockup-date "2025-12-31T00:00:00Z"

# Set lockup with epoch
solana stake-set-lockup <STAKE_ACCOUNT_ADDRESS> \
  --lockup-epoch 500

# Set new custodian
solana stake-set-lockup <STAKE_ACCOUNT_ADDRESS> \
  --new-custodian <CUSTODIAN_PUBKEY>

# Clear lockup (as custodian)
solana stake-set-lockup <STAKE_ACCOUNT_ADDRESS> \
  --lockup-date 0 \
  --lockup-epoch 0 \
  --custodian <CURRENT_CUSTODIAN_KEYPAIR>
```

---
